<!DOCTYPE>
<html>
	<head>
		
	</head>
	<body>
		<input type="text" name="username" autocomplete="off" />
		<input type="text" name="username" id="username" />
		<input type="email" name="email" />
		<p>password: <input type="password" name="password" /></p>
		If username exists, inject into page on focus, if multiple exist, show prompt
		Else, add hook for on change
		<script type="text/javascript">
			try{
				const fpUsernameInputSelector = 'input[type=email],input[type=text][name*=username],input[type=text][name*=email],input[type=text][name*=login]';
				var fpInjectUsernameOnFocus = (fpUsername) => {	// var because of scope!
					[...document.querySelectorAll(fpUsernameInputSelector)].map(fpUsrInput => {						
						let fpRestoreUsername = function(e){
							if(fpUsrInput){
								fpUsrInput.value = fpUsername;
								//fpUsrInput.select();
							}
							fpUsrInput.removeEventListener('focus', fpRestoreUsername);
						};
						fpUsrInput.addEventListener('focus', fpRestoreUsername);
						
					});
				}
				[...document.querySelectorAll(fpUsernameInputSelector)].map(fpUsrInput => {	
					fpUsrInput.addEventListener('change', () =>{
						if(fpUsrInput.value){
							fpandroid.saveUsername(fpUsrInput.value);	
						}
					});
				});
				
			}catch(e){console.error("FP auto username err: "+e);}
			fpInjectUsernameOnFocus("my-username"); // <-- HANDLE SEPARATELY
			
		</script>
	</body>
</html>
